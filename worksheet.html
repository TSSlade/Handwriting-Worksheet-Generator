<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Worksheet Builder</title>
  <link rel="icon" type="image/x-icon" href="./assets/images/favicon.ico" />
  <!-- Embedded fonts -->
  <link rel="stylesheet" href="css/fonts-embedded.css" />

  <!-- Layout/style rules -->
  <link rel="stylesheet" href="css/worksheet.css" />
</head>
<!-- <body class="debug"> -->
<body class="prod">
  <div id="app">
  <section id="controls">
    <h1>Worksheet Builder Prototype</h1>

    <div class="control-group">
      <label for="userPhrase">Sentence / phrase<br>(max 40 characters)</label>
      <input id="userPhrase" type="text" maxlength="40" placeholder="Something fun to write goes here." />
      <p class="helper">
        Text will never wrap; it will shrink to fit in the template width.
      </p>
    </div>

    <div class="control-group">
      <label for="imageUpload">Upload emoji / picture</label>
      <input id="imageUpload" type="file" accept="image/*,.pdf" />
      <p class="helper">
        JPG, PNG, SVG, GIF, WEBP, or PDF are accepted. In this prototype, PDF uploads
        are not previewed in the quadrant section.
      </p>
    </div>

    <button id="downloadPdfBtn" type="button">
      Download 1-page PDF
    </button>
  </section>

  <section id="preview-container">
    <!-- This is the “page” that will be exported as a PDF -->
    <div id="worksheetPage" class="worksheet-page">
      <!-- 1–2. Name / Date row with guidelines behind -->
      <div class="name-date-row">
        <!-- guidelines layer: one span that fills the whole row -->
        <div class="name-date-guidelines">
          <span class="guidelines-fill" data-glyph="_"></span>
        </div>

        <!-- foreground labels: both Name and Date -->
        <div class="name-date-foreground">
          <div class="name-block">
            <span class="label">Name:</span>
          </div>
          <div class="date-block">
            <span class="label">Date:</span>
          </div>
        </div>
      </div>

      <!-- 3. Instruction line with embedded key image -->
      <div class="section section--small-gap instruction-row">
        <p class="instruction">
          Color the tall letter boxes blue, the small letter boxes red, and the fall letter boxes yellow.
        </p>
        <img id="letterSizeKey" class="inline-key-image" src="./assets/images/tall-small-fall.png" alt="Letter size key" />
      </div>

      <!-- 4. User phrase, FILLED-BOX-FONT -->
      <div class="section section--medium-gap">
        <div class="phrase-line phrase-line--filled">
          <span id="filledPhraseText" class="phrase-text scalable-text">
            Something fun to write goes here.
          </span>
        </div>
      </div>

      <!-- 5. Instructions -->
      <div class="section section--small-gap">
        <p class="instruction">
          Copy the sentence fitting the letters inside the letter size boxes.
        </p>
      </div>

      <!-- 6. User phrase, EMPTY-BOX-FONT -->
      <div class="section section--medium-gap">
        <div class="phrase-line phrase-line--empty">
          <span id="emptyPhraseText" class="phrase-text scalable-text">
            Something fun to write goes here.
          </span>
        </div>
      </div>

      <!-- 7. Instructions -->
      <div class="section section--small-gap">
        <p class="instruction">
          Copy the sentence fitting each word inside the word space on the writing lines.
        </p>
      </div>

      <!-- 8. User phrase, GUIDELINES-FONT -->
      <div class="section section--medium-gap">
        <div class="phrase-line phrase-line--guidelines">
          <span id="guidelinesPhraseText" class="phrase-text scalable-text">
            Something fun to write goes here.
          </span>
        </div>
      </div>

      <!-- 9. Instructions -->
      <div class="section section--small-gap">
        <p class="instruction">
          Draw the missing pieces and color.
        </p>
      </div>

      <!-- 10–11. Quadrant puzzle row -->
      <div class="section section--large-gap">
        <p id="pdfWarning" class="helper helper--warning hidden">
          PDF uploads are accepted but cannot be used for the quadrant drawing section.
          Please upload an image to enable the puzzle below.
        </p>

        <div class="quad-row">
          <!-- Left margin spacer -->
          <div class="quad-spacer"></div>

          <!-- 1: missing upper-right -->
          <div class="quad-frame" data-missing="ur">
            <img class="quad-image" alt="Uploaded preview 1" />
            <div class="quad-mask"></div>
          </div>

          <div class="quad-spacer"></div>

          <!-- 2: missing lower-right -->
          <div class="quad-frame" data-missing="lr">
            <img class="quad-image" alt="Uploaded preview 2" />
            <div class="quad-mask"></div>
          </div>

          <div class="quad-spacer"></div>

          <!-- 3: missing lower-left -->
          <div class="quad-frame" data-missing="ll">
            <img class="quad-image" alt="Uploaded preview 3" />
            <div class="quad-mask"></div>
          </div>

          <div class="quad-spacer"></div>

          <!-- 4: missing upper-left -->
          <div class="quad-frame" data-missing="ul">
            <img class="quad-image" alt="Uploaded preview 4" />
            <div class="quad-mask"></div>
          </div>

          <!-- Right margin spacer -->
          <div class="quad-spacer"></div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- html2pdf library for PDF export -->
<!-- 1. html2pdf library -->
<script 
  src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
  integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer">
</script>
  <!-- Your code AFTER html2pdf -->
  <script src="js/worksheet.js"></script>
</body>
</html>